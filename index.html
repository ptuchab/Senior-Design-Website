<!DOCTYPE html>
<html>
	<head>
		<title> IPOWR</title>
		<link href="css/foundation.css" type="text/css" rel="stylesheet" />
		<link href="Senior_Design.css" type="text/css" rel="stylesheet" />

		<script src="js/vendor/modernizr.js"></script>
<!---                        Google Analytics                             -->
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-60987569-2', 'auto');
		  ga('send', 'pageview');
		</script>
<!---                      End Google Analytics                           -->
	</head>
	<body>
		<div id='header'>
		</div>

		<div id='page'>
		<div class='top-bar' id='nav'>
			<ul class='top-bar-section'>
				<li><a href="#header">Home</a></li>
				<li><a href="#about">About</a></li>
				<li><a href="#team">Team</a></li>
				<li><a href="#literature">Literature</a></li>
				<li><a href="#analysis">Analysis</a></li>
				<li><a href="#design">Design</a></li>
				<li><a href="#manufacturing">Control System</a></li>
				<li><a href="#gallery">Gallery</a></li>
				<li><a href="#references">References</a></li>
			</ul>
		</div>
		
		<div class='row'>
			<h3 id='about'>About</h3>
			<div class='panel'>
				<p>
					The goal of our project is to build a ballbot, a robot capable of balancing on top of a ball.  This is similiar to the <a href="https://www.youtube.com/watch?v=WeM3iQc6pxk"> inverted pendulum on a cart problem</a>, where one attempts to balance a rod by moving a cart back and forth underneath it.  However, while an inverted pendulum on a cart is restricted to a single plane, a robot on top of a ball is capable of falling in 2 planes.  A ballbot, similiar to an inverted pendulum, is a dynamically unstable system.  In the case of the inverted pendulum on a cart problem, you have 2 degrees of freedom but you only have control over one degree of freedom.  The system is underconstrained and is thus always in a state of instability.  For a ballbot you have 5 degrees of freedom, and at most you have the ability to control 3 of those degrees of freedom.  The first ballbot we are aware of was built at Carnegie Mellon University, <i><a href="https://www.ri.cmu.edu/pub_files/pub4/lauwers_tom_2006_1/lauwers_tom_2006_1.pdf"> A Dynamically Stable Single-Wheeled Mobile Robot with Inverse Mouse-Ball Drive </a></i>.  The planar dynamic model that was used in this paper has been adopted by every other ballbot that we have come across, and as a result, a variation of this model was used for our dynamic model.
				</P>
			</div>
		</div>

		<div class='row'>
			<h3 id="team">Team</h3>
			<div class='large-5 medium-5 small-5 columns'>
				<div class='panel'>
					<h4>Bryan Ptucha</h4>
					<h6>Department of Mechanical Engineering</h6>
					<div class='push-3'>
						<img src="Pictures/Bryan.png"/>
					</div>
				</div>
			</div>
			<div class='large-5 medium-5 small-5 push-2 columns'>
				<div class='panel'>
					<h4>Andrew Nederlof</h4>
					<h6>Department of Mechanical Engineering</h6>
					<div class='push-3'>
						<img src="Pictures/Andrew.png"/>
					</div>
				</div>
			</div>
			<div class='large-5 medium-5 small-5 columns'>
				<div class='panel'>
					<h4>Bill Miller</h4>
					<h6>Department of Mechanical Engineering</h6>
					<div class='push-3'>
						<img src="Pictures/Bill.png"/>
					</div>
				</div>
			</div>
			<div class='large-5 medium-5 small-5 columns'>
				<div class='panel'>
					<h4>Alex Arsenault</h4>
					<h6>Department of Electrical Engineering</h6>
					<div class='push-3'>
						<img src="Pictures/Alex.png"/>
					</div>
				</div>
			</div>
		</div>

		<div class='row'>
			<h3 id="literature">Literature</h3>
				<div class='row'>
					<div class='large-6 medium-6 small-6 columns'>
						<iframe width="560" height="315" src="https://www.youtube.com/embed/ACohrH64YKs" frameborder="0" allowfullscreen></iframe>
					</div>
					<div class='large-5 medium-5 small-5 columns'>
						<div class='panel'>
							<p>
								The video on the left is of a ballbot build by a group of undergraduate students at the Swiss Federal Institute of Technology Zurich.  The ballbot uses 3 omniwheels to balance the ballbot in the xz and yz planes, as well as giving the ballbot the ability to rotate about its yaw axis.  Their paper, <i><a href="http://e-collection.library.ethz.ch/eserv/eth:7943/eth-7943-01.pdf"> Modeling and Control of a Ballbot </a></i>, proved to be quite useful in the early stages of our analysis.
							</p>
						</div>
					</div>
				</div>
				<div class='row'>
					<div class='large-6 medium-6 small-6 columns'>
						<div class='panel'>
							<p>
								The video on the right is a ballbot that was made out of Lego Mindstorms.  Unlike the ballbot above which has the ability to rotate about its yaw axis, the wheels on this ballbot are orientated in such a way that it can only balance in the xz and yz planes, but not rotate about the yaw axis.  We decided to go with a wheel orientation similiar to this.  By removing one degree of freedom from the ballbot, the control system becomes much easier to develop, and do to the limited timeframe of our project we thought that this might be the best approach.
							</p>
						</div>
					</div>
					<div class='large-4 medium-4 small-4 pull-custom-1 columns'>
						<iframe width="420" height="315" src="https://www.youtube.com/embed/f8jxGsg3p0Y" frameborder="0" allowfullscreen></iframe>
					</div>
				</div>
				<div class='large-12 medium-12 small-12 panel columns'>
					<p>
						All of the papers that we read and used information from throughout our project can be found at the bottom of the page in the <a href="#references">References</a> section.  The most informative papers when working on the analysis portion were <i><a href="http://e-collection.library.ethz.ch/eserv/eth:7943/eth-7943-01.pdf"> Modeling and Control of a Ballbot </a></i> and <i><a href="http://data.mecheng.adelaide.edu.au/robotics/projects/2009/Ballbot/Ballbot_Final_Report.pdf"> Design and Build a Ballbot</a></i>.  Both of these papers were very thorough with all of their analyses since they were both undergraduate bachelor theses and this proved to be very helpful in the early stages of determining how to approach modeling the dynamics of the system.  The remaining papers proved to be useful in comparing various dynamic models, as well as for looking at different approaches used for controlling the ballbot. 
					</p>
				</div>
		</div>

		<div class='row'>
			<h3 id="analysis">Analysis</h3>
			<h5> Lagrangian </h5>
			<div class='large-12 medium-12 small-12 columns panel'>
				<p>
					The dynamic model that we used for our ballbot was almost identical to the planar model developed by the team Rezero team at ETH Zurich.  This involved solving the kinetic and potential energies for the ball, wheels, and robot body and then combining these energies together to solve the Lagranian for the system.
				</p>
			</div>
			<div class='row'>
				<div class='large-4 medium-4 small-4 columns'>
					<img src="Analysis/Planar_Model.png" />
					<p><i>Modeling and Control of a Ballbot (2010)</i></p>
				</div>
				<div class='large-8 medium-8 small-8 columns panel'>
					<o>
						The diagram on the left shows the breakdown of the planar model that was used in the dynamic analysis for the ballbot.  The robot body is condensed down to a point source at the location of the center of mass of the robot.  We used all of the same assumptions as the Rezero team.  These include a no slip condition between the ball and the ground as well as between the wheels and the ball.  We also assume there is no deformation or friction and that the ball can only move horizontally, the ball does not start hopping off of the ground.  In terms of notation, variables associated with the ball have a subscript <i>"K"</i>, variables associated with the wheel have a subscript <i>"W"</i> and variables associated with the body have a subscript <i>"A"</i>.
					</p>
				</div>
			</div>
			<div class='row'>
				<div class='large-4 medium-4 small-4 columns panel'>
					<div class='push-3'>
						<img src="Analysis/Energies.png"/>
					</div>
					<p>
						The energies for the Lagrangian were combined from the energies of the ball, wheel, and body.
					</p>
				</div>
				<div class='large-3 medium-3 small-3 push-custom-1 columns panel'>
					<img src="Analysis/Coordinate_System.png"/>
					<p>
						The equations above define the coordinate systems for the yz and xz-planes.
					</p>
				</div>
				<div class='large-4 medium-4 small-4 columns panel'>
					<img src="Analysis/Lagrangian.png"/>
					<p>
						The non-conservative Lagrangian is defined as above.  In our case the only non-potential force that we consider comes from the motors.
					</p>
				</div>
			</div>
			<div class='row'>
				<div class='large-4 medium-4 small-4 columns'>
					<img src="Analysis/Lagrangian_Solution.png"/>
				</div>
				<div class='large-8 medium-8 small-8 columns panel'>
					<p>
						The solution to the Lagrangian can be found  on the left while the matrices associated with it can be found below.
					</p>
				</div>
				<div class='push-1 columns'>
					<img src="Analysis/Matrices.png"/>
				</div>
			</div>
			<h5> Simulink </h5>
			<div class='row'>
				<div class='large-12 medium-12 small-12 columns panel'>
					<p>
						Once we had the solution to the Lagrangian, we then put the model into Simulink so that we could verify that the model made sense.  Once we had the model verified, the first step was to test out various parameters that we had control over and see how this effected the stability of the ballbot.  These parameters included such things as whether a heavier or lighter bowling ball would be better (spoiler alert: a lighter ball is better), as well as if we wanted a higher or lower center of mass.  The model also helped us decide on how much torque and speed we needed to get out of our motors so that we could choose them appropriately.  Once we had some of our parameters chosen, the model let us test out various control methods to test if it was possible for us to tune our system.  The model shown below has a PID control loop implemented that was able to stabalize the model.
					</p>
				</div>
				<div class='push-custom-2 columns'>
					<img src="Analysis/Simulink_Model.png"/>
					<p>
					</p>
				</div>
			</div>
			<div class='row'>
				<div class='large-12 medium-12 small-12 columns panel'>
					<p>
						Below is a sample of a couple of graphs that the Simulink model would output.  On the left is the change in the body angle as the robot responds to a simulated "push" disturbance.  To the right one can see how the torque of the motor needs to respond to counteract the disturbance.  If you look back up at the Simulink block diagram you can see that there are various scopes throughout the model.  Depending on what we might have been investigating at the time we would look at an assortment of traces to help us better understand what was happening and to verify that the behavior made sense.
					</p>
				</div>
				<div class='large-6 medium-6 small-6 columns'>
					<img src="Analysis/Body_Angle_Output.png"/>
				</div>
				<div class='large-6 medium-6 small-6 push-custom-1 columns'>
					<img src="Analysis/Motor_Torque_Output.png"/>
				</div>
			</div>
		</div>

		<div class='row'>
			<h3 id="design">Design</h3>
			<h5> Engineering Drawings </h5>
<!---                                  Slider for CAD images                                 -->
			<div class='row push-2'>
				<div class="slideshow-wrapper">
					<div class="slide-viewer">
						<div class="slide-group">
						<ul>
							<li class="slide slide-1"><img src="Drawings/IPOWR_Assembly.jpg" width="650"/></li>
							<li class="slide slide-2"><img src="Drawings/Arrow-Head-Base.jpg" width="650"/></li>
							<li class="slide slide-3"><img src="Drawings/Middle_Plate.jpg" width="650"/></li>
							<li class="slide slide-4"><img src="Drawings/Top_Plate.jpg" width="650"/></li>
							<li class="slide slide-5"><img src="Drawings/Axle_Bracket.jpg" width="650"/></li>
							<li class="slide slide-6"><img src="Drawings/Motor_Axle_Bracket.jpg" width="650"/></li>
							<li class="slide slide-7"><img src="Drawings/Axle.jpg" width="650"/></li>
							<li class="slide slide-8"><img src="Drawings/Nylon_Insert.jpg" width="650"/></li>
							<li class="slide slide-9"><img src="Drawings/1_Inch_Hollow_Bar.jpg" width="650"/></li>
							<li class="slide slide-10"><img src="Drawings/Rear_Motor_Tensioner.jpg" width="650"/></li>
							<li class="slide slide-11"><img src="Drawings/Omniwheel_Assembly.jpg" width="650"/></li>
							<li class="slide slide-12"><img src="Drawings/Omniwheel_Hex_Hub.jpg" width="650"/></li>
						</ul>
						</div>
					</div>
					<div class="button-group"><div></div></div>
				</div>
			</div>
<!---                               End Slider for CAD images                                -->
		</div>

		<div class='row'>
			<h3 id="manufacturing">Control System</h3>
			<div class="row">
				<div class="large-4 medium-4 small-4 columns">
					<img src="Pictures/SparkFun_IMU.jpg" width="300"/>
					<p>Sparkfun Electronics</p>
				</div>
				<div class='large-8 medium-8 small-8 columns panel'>
					<h5>9 Degrees of Freedom - Razor IMU</h5>
					<p>
						For the feedback in our control system, we used a <a href="https://www.sparkfun.com/products/10736">9 degree of freedom IMU from spakfun electronics</a>, shown on the left.  This unit includes a 3 axis accelerometer, 3 axis gyroscope, and a 3 axis magnetometer.  The gyroscope was the most important feedback for the balancing of the ballbot.  The IMU includes a processing chip on board that can be programmed using the Arduino IDE.  We used an <a href="https://github.com/ptrbrtz/razor-9dof-ahrs/wiki/Tutorial">open source library</a> referenced on the Sparkfun website for processing the measured accelerometer, gyroscope and magnetometer readings to give us yaw, pitch, and roll angles after processing.  The pitch and roll readings were then used as our feedback for our PID controller.
					</p>
				</div>
			</div>
			<div class="row">
				<div class='large-8 medium-8 small-8 columns panel'>
					<h5>Ardunio Uno</h5>
					<p>
						An <a href="http://www.arduino.cc/en/Main/ArduinoBoardUno">Arduino Uno</a> was used as the controller for the ballbot.  The pitch and roll from the IMU are fed into a PID control system which is used for balancing the ballbot.  We use the <a href="http://playground.arduino.cc/Code/PIDLibrary">Arduino PID Library</a> as the starting point for our controller.  We use two PID loops for control, one loop has the pitch as the feedback while the other has the roll as the feedback.  We then take the output of both of these control loops and make a vector from the two scalars, which is the direction we need to drive the ballbot in to correct for its current position.  This vector is broken down into the signal needed for each of the 3 individual motors needed to drive the ballbot in the correct direction.
					</p>
				</div>
				<div class="large-4 medium-4 small-4 columns">
					<img src="Pictures/ArduinoUno.jpg" width="300"/>
					<p>Arduino</p>
				</div>
			</div>
		</div>

		<div class='row'>
			<h3 id="gallery">Gallery</h3>
			</br></br>
			<div class='row'>
				<div class='large-8 push-2 columns'>
					<video src="Videos/Motor_Turning.mp4" width="600" controls>
					</video>
				</div>
			</div>
			</br></br></br>
			<div class='row'>
				<div class='large-6 columns'>
					<img src="Pictures/Ball_Base_View.jpg" width="600" height="800" />
				</div>
				<div class='large-6 columns'>
					<img src="Pictures/First_Setup.jpg" width="600" height="800" />
				</div>
			</div>
			</br></br></br>
			<div class='row'>
				<div class='large-6 columns'>
					<img src="Pictures/Early_Testing.png" width="600" height="1067" />
				</div>
				<div class='large-6 columns'>
					<video src="Videos/First_Balancing.mp4" width="400" controls>
					</video>
				</div>
			</div>
			</br></br></br>
			<div class='row'>
				<div class='large-8 push-2 columns'>
					<img src="Pictures/Team_Shot.png" width="800" height="450"/>
				</div>
			</div>
			</br></br></br>
			<div class='row'>
				<div class='large-6 columns'>
					<img src="Pictures/Adjusting.jpg" width="600" height="800" />
				</div>
				<div class='large-6 columns'>
					<img src="Pictures/Mat_Setup.jpg" width="600" height="800" />
				</div>
			</div>
			</br></br></br>
			<div class='row'>
				<div class='large-6 columns'>
					<img src="Pictures/Expo.jpg" width="600" height="800" />
				</div>
				<div class='large-6 columns'>
					<img src="Pictures/Expo_Stage.jpg" width="600" height="800" />
				</div>
			</div>
			</br></br></br>
			<div class='large-6 push-3 columns'>
				<video src="Videos/Expo.mov" width="400" controls>
				</video>
			</div>
		</div>

		<div class='row'>
			<h3 id="references">References</h3>
				<p>
					<a href="https://www.ri.cmu.edu/pub_files/pub4/lauwers_tom_2006_1/lauwers_tom_2006_1.pdf"> A Dynamically Stable Single-Wheeled Mobile Robot with Inverse Mouse-Ball Drive </a></br>			
					<a href="http://e-collection.library.ethz.ch/eserv/eth:7943/eth-7943-01.pdf"> Modeling and Control of a Ballbot </a></br>
					<a href="http://data.mecheng.adelaide.edu.au/robotics/projects/2009/Ballbot/Ballbot_Final_Report.pdf">Design and Build a Ballbot</a></br>
					<a href="http://clarinet.msl.ri.cmu.edu/publications/pdfs/ballbotIJRR_final.pdf"> The Ballbot: An Omnidirectional Balancing Mobile Robot </a></br>
				</P>
		</div>

	</div>
	<div class='row footer'>
		<div class='column large-4 medium-4 small-4 push-1'>
			<img src="IPOWR_Logo_4_Footer.png" />
		</div>
		<div class='columns large-4 medium-4 small-4 pull-2'>
			Bryan Ptucha</br>
			Andrew Nederlof</br>
			Bill Miller</br>
			Alex Arsenault</br>
		</div>
		<div class='large-4 medium-4 small-4 columns'>
			<ul>
				<li><a href="#header">Home</a></li>
				<li><a href="#about">About</a></li>
				<li><a href="#team">Team</a></li>
				<li><a href="#literature">Literature</a></li>
				<li><a href="#analysis">Analysis</a></li>
				<li><a href="#design">Design</a></li>
				<li><a href="#manufacturing">Control System</a></li>
				<li><a href="#gallery">Gallery</a></li>
				<li><a href="#references">References</a></li>
			</ul>
		</div>
	</div>

		<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
		<script src="script.js"></script>
	</body>
</html>